import pickle
from app import *
from moves import *

import pprint

BEFORE = b'\x80\x04\x95\xf0\x05\x00\x00\x00\x00\x00\x00\x8c\ngame_state\x94\x8c\tGameState\x94\x93\x94)\x81\x94}\x94(\x8c\x05board\x94\x8c\x0bboard_state\x94\x8c\nBoardState\x94\x93\x94)\x81\x94}\x94(\x8c\x05tiles\x94}\x94(K\x00K\x00\x86\x94(K\x03K\x01K\x00K\x06t\x94J\xff\xff\xff\xffK\x00\x86\x94(K\x05K\x06K\x02K\x00t\x94K\x01K\x00\x86\x94(K\x07K\x05K\x04K\x01t\x94u\x8c\x10available_spaces\x94\x8f\x94(K\x00K\x01\x86\x94J\xff\xff\xff\xffJ\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffK\x01\x86\x94K\x01K\x01\x86\x94K\x02K\x00\x86\x94K\x01J\xff\xff\xff\xff\x86\x94J\xfe\xff\xff\xffK\x00\x86\x94K\x00J\xff\xff\xff\xff\x86\x94\x90\x8c\x13pending_token_slots\x94\x8f\x94\x8c\x0btokens_left\x94\x8f\x94(K\x00K\x01K\x02K\x03K\x04K\x05K\x06K\x07\x90ub\x8c\x05state\x94h\x00\x8c\x05State\x94\x93\x94K\x00\x85\x94R\x94\x8c\x04deck\x94]\x94(((K\x00K\x07K\x02K\x03t\x94(K\x02K\x03K\x00K\x07t\x94(K\x03K\x00K\x07K\x02t\x94(K\x07K\x02K\x03K\x00t\x94t\x94((K\x00K\x06K\x01K\x04t\x94(K\x01K\x04K\x00K\x06t\x94(K\x04K\x00K\x06K\x01t\x94(K\x06K\x01K\x04K\x00t\x94t\x94((K\x02K\x05K\x03K\x04t\x94(K\x03K\x04K\x02K\x05t\x94(K\x04K\x02K\x05K\x03t\x94(K\x05K\x03K\x04K\x02t\x94t\x94((K\x01K\x06K\x07K\x02t\x94(K\x02K\x01K\x06K\x07t\x94(K\x06K\x07K\x02K\x01t\x94(K\x07K\x02K\x01K\x06t\x94t\x94((K\x03K\x05K\x07K\x04t\x94(K\x04K\x03K\x05K\x07t\x94(K\x05K\x07K\x04K\x03t\x94(K\x07K\x04K\x03K\x05t\x94t\x94((K\x00K\x04K\x06K\x03t\x94(K\x03K\x00K\x04K\x06t\x94(K\x04K\x06K\x03K\x00t\x94(K\x06K\x03K\x00K\x04t\x94t\x94((K\x02K\x07K\x06K\x05t\x94(K\x05K\x02K\x07K\x06t\x94(K\x06K\x05K\x02K\x07t\x94(K\x07K\x06K\x05K\x02t\x94t\x94((K\x01K\x05K\x04K\x07t\x94(K\x04K\x07K\x01K\x05t\x94(K\x05K\x04K\x07K\x01t\x94(K\x07K\x01K\x05K\x04t\x94t\x94((K\x00K\x01K\x06K\x04t\x94(K\x01K\x06K\x04K\x00t\x94(K\x04K\x00K\x01K\x06t\x94(K\x06K\x04K\x00K\x01t\x94t\x94((K\x00K\x01K\x04K\x07t\x94(K\x01K\x04K\x07K\x00t\x94(K\x04K\x07K\x00K\x01t\x94(K\x07K\x00K\x01K\x04t\x94t\x94((K\x01K\x07K\x03K\x05t\x94(K\x03K\x05K\x01K\x07t\x94(K\x05K\x01K\x07K\x03t\x94(K\x07K\x03K\x05K\x01t\x94t\x94((K\x01K\x03K\x06K\x04t\x94(K\x03K\x06K\x04K\x01t\x94(K\x04K\x01K\x03K\x06t\x94(K\x06K\x04K\x01K\x03t\x94t\x94((K\x00K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x00t\x94(K\x04K\x05K\x00K\x02t\x94(K\x05K\x00K\x02K\x04t\x94t\x94((K\x00K\x03K\x07K\x06t\x94(K\x03K\x07K\x06K\x00t\x94(K\x06K\x00K\x03K\x07t\x94(K\x07K\x06K\x00K\x03t\x94t\x94((K\x00K\x03K\x02K\x06t\x94(K\x02K\x06K\x00K\x03t\x94(K\x03K\x02K\x06K\x00t\x94(K\x06K\x00K\x03K\x02t\x94t\x94((K\x00K\x07K\x01K\x02t\x94(K\x01K\x02K\x00K\x07t\x94(K\x02K\x00K\x07K\x01t\x94(K\x07K\x01K\x02K\x00t\x94t\x94((K\x02K\x07K\x05K\x06t\x94(K\x05K\x06K\x02K\x07t\x94(K\x06K\x02K\x07K\x05t\x94(K\x07K\x05K\x06K\x02t\x94t\x94((K\x03K\x04K\x06K\x07t\x94(K\x04K\x06K\x07K\x03t\x94(K\x06K\x07K\x03K\x04t\x94(K\x07K\x03K\x04K\x06t\x94t\x94((K\x01K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x01t\x94(K\x04K\x05K\x01K\x02t\x94(K\x05K\x01K\x02K\x04t\x94t\x94((K\x02K\x03K\x06K\x05t\x94(K\x03K\x06K\x05K\x02t\x94(K\x05K\x02K\x03K\x06t\x94(K\x06K\x05K\x02K\x03t\x94t\x94((K\x01K\x03K\x02K\x06t\x94(K\x02K\x06K\x01K\x03t\x94(K\x03K\x02K\x06K\x01t\x94(K\x06K\x01K\x03K\x02t\x94t\x94((K\x00K\x02K\x01K\x05t\x94(K\x01K\x05K\x00K\x02t\x94(K\x02K\x01K\x05K\x00t\x94(K\x05K\x00K\x02K\x01t\x94t\x94((K\x00K\x05K\x03K\x01t\x94(K\x01K\x00K\x05K\x03t\x94(K\x03K\x01K\x00K\x05t\x94(K\x05K\x03K\x01K\x00t\x94t\x94((K\x02K\x05K\x07K\x04t\x94(K\x04K\x02K\x05K\x07t\x94(K\x05K\x07K\x04K\x02t\x94(K\x07K\x04K\x02K\x05t\x94t\x94e\x8c\x0bdrawn_tiles\x94((K\x00K\x04K\x03K\x07t\x94(K\x03K\x07K\x00K\x04t\x94(K\x04K\x03K\x07K\x00t\x94(K\x07K\x00K\x04K\x03t\x94t\x94ub.'
MOVE = b'\x80\x04\x95D\x00\x00\x00\x00\x00\x00\x00\x8c\x05moves\x94\x8c\x08MoveTile\x94\x93\x94)\x81\x94}\x94(\x8c\x08position\x94J\xfe\xff\xff\xffK\x00\x86\x94\x8c\x04tile\x94(K\x07K\x00K\x04K\x03t\x94ub.'
AFTER = b'\x80\x04\x95\xea\x05\x00\x00\x00\x00\x00\x00\x8c\ngame_state\x94\x8c\tGameState\x94\x93\x94)\x81\x94}\x94(\x8c\x05board\x94\x8c\x0bboard_state\x94\x8c\nBoardState\x94\x93\x94)\x81\x94}\x94(\x8c\x05tiles\x94}\x94(K\x00K\x00\x86\x94(K\x03K\x01K\x00K\x06t\x94J\xff\xff\xff\xffK\x00\x86\x94(K\x05K\x06K\x02K\x00t\x94K\x01K\x00\x86\x94(K\x07K\x05K\x04K\x01t\x94J\xfe\xff\xff\xffK\x00\x86\x94(K\x07K\x00K\x04K\x03t\x94u\x8c\x10available_spaces\x94\x8f\x94(K\x00K\x01\x86\x94J\xff\xff\xff\xffJ\xff\xff\xff\xff\x86\x94J\xfe\xff\xff\xffJ\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffK\x01\x86\x94K\x01K\x01\x86\x94J\xfe\xff\xff\xffK\x01\x86\x94K\x02K\x00\x86\x94K\x01J\xff\xff\xff\xff\x86\x94J\xfd\xff\xff\xffK\x00\x86\x94K\x00J\xff\xff\xff\xff\x86\x94\x90\x8c\x13pending_token_slots\x94\x8f\x94\x8c\x0btokens_left\x94\x8f\x94(K\x00K\x01K\x02K\x03K\x04K\x05K\x06K\x07\x90ub\x8c\x05state\x94h\x00\x8c\x05State\x94\x93\x94K\x00\x85\x94R\x94\x8c\x04deck\x94]\x94(((K\x00K\x07K\x02K\x03t\x94(K\x02K\x03K\x00K\x07t\x94(K\x03K\x00K\x07K\x02t\x94(K\x07K\x02K\x03K\x00t\x94t\x94((K\x00K\x06K\x01K\x04t\x94(K\x01K\x04K\x00K\x06t\x94(K\x04K\x00K\x06K\x01t\x94(K\x06K\x01K\x04K\x00t\x94t\x94((K\x02K\x05K\x03K\x04t\x94(K\x03K\x04K\x02K\x05t\x94(K\x04K\x02K\x05K\x03t\x94(K\x05K\x03K\x04K\x02t\x94t\x94((K\x01K\x06K\x07K\x02t\x94(K\x02K\x01K\x06K\x07t\x94(K\x06K\x07K\x02K\x01t\x94(K\x07K\x02K\x01K\x06t\x94t\x94((K\x03K\x05K\x07K\x04t\x94(K\x04K\x03K\x05K\x07t\x94(K\x05K\x07K\x04K\x03t\x94(K\x07K\x04K\x03K\x05t\x94t\x94((K\x00K\x04K\x06K\x03t\x94(K\x03K\x00K\x04K\x06t\x94(K\x04K\x06K\x03K\x00t\x94(K\x06K\x03K\x00K\x04t\x94t\x94((K\x02K\x07K\x06K\x05t\x94(K\x05K\x02K\x07K\x06t\x94(K\x06K\x05K\x02K\x07t\x94(K\x07K\x06K\x05K\x02t\x94t\x94((K\x01K\x05K\x04K\x07t\x94(K\x04K\x07K\x01K\x05t\x94(K\x05K\x04K\x07K\x01t\x94(K\x07K\x01K\x05K\x04t\x94t\x94((K\x00K\x01K\x06K\x04t\x94(K\x01K\x06K\x04K\x00t\x94(K\x04K\x00K\x01K\x06t\x94(K\x06K\x04K\x00K\x01t\x94t\x94((K\x00K\x01K\x04K\x07t\x94(K\x01K\x04K\x07K\x00t\x94(K\x04K\x07K\x00K\x01t\x94(K\x07K\x00K\x01K\x04t\x94t\x94((K\x01K\x07K\x03K\x05t\x94(K\x03K\x05K\x01K\x07t\x94(K\x05K\x01K\x07K\x03t\x94(K\x07K\x03K\x05K\x01t\x94t\x94((K\x01K\x03K\x06K\x04t\x94(K\x03K\x06K\x04K\x01t\x94(K\x04K\x01K\x03K\x06t\x94(K\x06K\x04K\x01K\x03t\x94t\x94((K\x00K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x00t\x94(K\x04K\x05K\x00K\x02t\x94(K\x05K\x00K\x02K\x04t\x94t\x94((K\x00K\x03K\x07K\x06t\x94(K\x03K\x07K\x06K\x00t\x94(K\x06K\x00K\x03K\x07t\x94(K\x07K\x06K\x00K\x03t\x94t\x94((K\x00K\x03K\x02K\x06t\x94(K\x02K\x06K\x00K\x03t\x94(K\x03K\x02K\x06K\x00t\x94(K\x06K\x00K\x03K\x02t\x94t\x94((K\x00K\x07K\x01K\x02t\x94(K\x01K\x02K\x00K\x07t\x94(K\x02K\x00K\x07K\x01t\x94(K\x07K\x01K\x02K\x00t\x94t\x94((K\x02K\x07K\x05K\x06t\x94(K\x05K\x06K\x02K\x07t\x94(K\x06K\x02K\x07K\x05t\x94(K\x07K\x05K\x06K\x02t\x94t\x94((K\x03K\x04K\x06K\x07t\x94(K\x04K\x06K\x07K\x03t\x94(K\x06K\x07K\x03K\x04t\x94(K\x07K\x03K\x04K\x06t\x94t\x94((K\x01K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x01t\x94(K\x04K\x05K\x01K\x02t\x94(K\x05K\x01K\x02K\x04t\x94t\x94((K\x02K\x03K\x06K\x05t\x94(K\x03K\x06K\x05K\x02t\x94(K\x05K\x02K\x03K\x06t\x94(K\x06K\x05K\x02K\x03t\x94t\x94((K\x01K\x03K\x02K\x06t\x94(K\x02K\x06K\x01K\x03t\x94(K\x03K\x02K\x06K\x01t\x94(K\x06K\x01K\x03K\x02t\x94t\x94((K\x00K\x02K\x01K\x05t\x94(K\x01K\x05K\x00K\x02t\x94(K\x02K\x01K\x05K\x00t\x94(K\x05K\x00K\x02K\x01t\x94t\x94((K\x00K\x05K\x03K\x01t\x94(K\x01K\x00K\x05K\x03t\x94(K\x03K\x01K\x00K\x05t\x94(K\x05K\x03K\x01K\x00t\x94t\x94e\x8c\x0bdrawn_tiles\x94((K\x02K\x05K\x07K\x04t\x94(K\x04K\x02K\x05K\x07t\x94(K\x05K\x07K\x04K\x02t\x94(K\x07K\x04K\x02K\x05t\x94t\x94ub.'

def test_tile_move():
    game: GameState = pickle.loads(BEFORE)
    move: Move = pickle.loads(MOVE)

    move.attempt(game)

    assert game_state_compare(game, pickle.loads(AFTER)) == {}

def test_tile_undo():
    game: GameState = pickle.loads(AFTER)
    move: Move = pickle.loads(MOVE)

    move.attempt_undo(game)

    assert game_state_compare(game, pickle.loads(BEFORE)) == {}

BEFORE_QUAD = b'\x80\x04\x95\xd5\x05\x00\x00\x00\x00\x00\x00\x8c\ngame_state\x94\x8c\tGameState\x94\x93\x94)\x81\x94}\x94(\x8c\x05board\x94\x8c\x0bboard_state\x94\x8c\nBoardState\x94\x93\x94)\x81\x94}\x94(\x8c\x05tiles\x94}\x94(K\x00K\x00\x86\x94(K\x03K\x01K\x00K\x06t\x94J\xff\xff\xff\xffK\x00\x86\x94(K\x05K\x06K\x02K\x00t\x94K\x01K\x00\x86\x94(K\x07K\x05K\x04K\x01t\x94K\x00J\xff\xff\xff\xff\x86\x94(K\x00K\x04K\x03K\x07t\x94u\x8c\x10available_spaces\x94\x8f\x94(K\x00K\x01\x86\x94J\xff\xff\xff\xffJ\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffK\x01\x86\x94K\x01K\x01\x86\x94K\x02K\x00\x86\x94K\x01J\xff\xff\xff\xff\x86\x94J\xfe\xff\xff\xffK\x00\x86\x94K\x00J\xfe\xff\xff\xff\x86\x94\x90\x8c\x13pending_token_slots\x94\x8f\x94\x8c\x0btokens_left\x94\x8f\x94(K\x00K\x01K\x02K\x03K\x04K\x05K\x06K\x07\x90ub\x8c\x05state\x94h\x00\x8c\x05State\x94\x93\x94K\x00\x85\x94R\x94\x8c\x04deck\x94]\x94(((K\x00K\x07K\x02K\x03t\x94(K\x02K\x03K\x00K\x07t\x94(K\x03K\x00K\x07K\x02t\x94(K\x07K\x02K\x03K\x00t\x94t\x94((K\x00K\x06K\x01K\x04t\x94(K\x01K\x04K\x00K\x06t\x94(K\x04K\x00K\x06K\x01t\x94(K\x06K\x01K\x04K\x00t\x94t\x94((K\x02K\x05K\x03K\x04t\x94(K\x03K\x04K\x02K\x05t\x94(K\x04K\x02K\x05K\x03t\x94(K\x05K\x03K\x04K\x02t\x94t\x94((K\x01K\x06K\x07K\x02t\x94(K\x02K\x01K\x06K\x07t\x94(K\x06K\x07K\x02K\x01t\x94(K\x07K\x02K\x01K\x06t\x94t\x94((K\x03K\x05K\x07K\x04t\x94(K\x04K\x03K\x05K\x07t\x94(K\x05K\x07K\x04K\x03t\x94(K\x07K\x04K\x03K\x05t\x94t\x94((K\x00K\x04K\x06K\x03t\x94(K\x03K\x00K\x04K\x06t\x94(K\x04K\x06K\x03K\x00t\x94(K\x06K\x03K\x00K\x04t\x94t\x94((K\x02K\x07K\x06K\x05t\x94(K\x05K\x02K\x07K\x06t\x94(K\x06K\x05K\x02K\x07t\x94(K\x07K\x06K\x05K\x02t\x94t\x94((K\x01K\x05K\x04K\x07t\x94(K\x04K\x07K\x01K\x05t\x94(K\x05K\x04K\x07K\x01t\x94(K\x07K\x01K\x05K\x04t\x94t\x94((K\x00K\x01K\x06K\x04t\x94(K\x01K\x06K\x04K\x00t\x94(K\x04K\x00K\x01K\x06t\x94(K\x06K\x04K\x00K\x01t\x94t\x94((K\x00K\x01K\x04K\x07t\x94(K\x01K\x04K\x07K\x00t\x94(K\x04K\x07K\x00K\x01t\x94(K\x07K\x00K\x01K\x04t\x94t\x94((K\x01K\x07K\x03K\x05t\x94(K\x03K\x05K\x01K\x07t\x94(K\x05K\x01K\x07K\x03t\x94(K\x07K\x03K\x05K\x01t\x94t\x94((K\x01K\x03K\x06K\x04t\x94(K\x03K\x06K\x04K\x01t\x94(K\x04K\x01K\x03K\x06t\x94(K\x06K\x04K\x01K\x03t\x94t\x94((K\x00K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x00t\x94(K\x04K\x05K\x00K\x02t\x94(K\x05K\x00K\x02K\x04t\x94t\x94((K\x00K\x03K\x07K\x06t\x94(K\x03K\x07K\x06K\x00t\x94(K\x06K\x00K\x03K\x07t\x94(K\x07K\x06K\x00K\x03t\x94t\x94((K\x00K\x03K\x02K\x06t\x94(K\x02K\x06K\x00K\x03t\x94(K\x03K\x02K\x06K\x00t\x94(K\x06K\x00K\x03K\x02t\x94t\x94((K\x00K\x07K\x01K\x02t\x94(K\x01K\x02K\x00K\x07t\x94(K\x02K\x00K\x07K\x01t\x94(K\x07K\x01K\x02K\x00t\x94t\x94((K\x02K\x07K\x05K\x06t\x94(K\x05K\x06K\x02K\x07t\x94(K\x06K\x02K\x07K\x05t\x94(K\x07K\x05K\x06K\x02t\x94t\x94((K\x03K\x04K\x06K\x07t\x94(K\x04K\x06K\x07K\x03t\x94(K\x06K\x07K\x03K\x04t\x94(K\x07K\x03K\x04K\x06t\x94t\x94((K\x01K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x01t\x94(K\x04K\x05K\x01K\x02t\x94(K\x05K\x01K\x02K\x04t\x94t\x94((K\x02K\x03K\x06K\x05t\x94(K\x03K\x06K\x05K\x02t\x94(K\x05K\x02K\x03K\x06t\x94(K\x06K\x05K\x02K\x03t\x94t\x94((K\x01K\x03K\x02K\x06t\x94(K\x02K\x06K\x01K\x03t\x94(K\x03K\x02K\x06K\x01t\x94(K\x06K\x01K\x03K\x02t\x94t\x94((K\x00K\x02K\x01K\x05t\x94(K\x01K\x05K\x00K\x02t\x94(K\x02K\x01K\x05K\x00t\x94(K\x05K\x00K\x02K\x01t\x94t\x94((K\x00K\x05K\x03K\x01t\x94(K\x01K\x00K\x05K\x03t\x94(K\x03K\x01K\x00K\x05t\x94(K\x05K\x03K\x01K\x00t\x94t\x94e\x8c\x0bdrawn_tiles\x94((K\x02K\x05K\x07K\x04t\x94(K\x04K\x02K\x05K\x07t\x94(K\x05K\x07K\x04K\x02t\x94(K\x07K\x04K\x02K\x05t\x94t\x94ub.'
MOVE_QUAD = b'\x80\x04\x95D\x00\x00\x00\x00\x00\x00\x00\x8c\x05moves\x94\x8c\x08MoveTile\x94\x93\x94)\x81\x94}\x94(\x8c\x08position\x94K\x01J\xff\xff\xff\xff\x86\x94\x8c\x04tile\x94(K\x02K\x05K\x07K\x04t\x94ub.'
AFTER_QUAD = b'\x80\x04\x95\xcf\x05\x00\x00\x00\x00\x00\x00\x8c\ngame_state\x94\x8c\tGameState\x94\x93\x94)\x81\x94}\x94(\x8c\x05board\x94\x8c\x0bboard_state\x94\x8c\nBoardState\x94\x93\x94)\x81\x94}\x94(\x8c\x05tiles\x94}\x94(K\x00K\x00\x86\x94(K\x03K\x01K\x00K\x06t\x94J\xff\xff\xff\xffK\x00\x86\x94(K\x05K\x06K\x02K\x00t\x94K\x01K\x00\x86\x94(K\x07K\x05K\x04K\x01t\x94K\x00J\xff\xff\xff\xff\x86\x94(K\x00K\x04K\x03K\x07t\x94K\x01J\xff\xff\xff\xff\x86\x94(K\x02K\x05K\x07K\x04t\x94u\x8c\x10available_spaces\x94\x8f\x94(K\x00K\x01\x86\x94K\x02J\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffJ\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffK\x01\x86\x94K\x01K\x01\x86\x94K\x02K\x00\x86\x94K\x01J\xfe\xff\xff\xff\x86\x94J\xfe\xff\xff\xffK\x00\x86\x94K\x00J\xfe\xff\xff\xff\x86\x94\x90\x8c\x13pending_token_slots\x94\x8f\x94(K\x00J\xff\xff\xff\xff\x86\x94\x90\x8c\x0btokens_left\x94\x8f\x94(K\x00K\x01K\x02K\x03K\x04K\x05K\x06K\x07\x90ub\x8c\x05state\x94h\x00\x8c\x05State\x94\x93\x94K\x00\x85\x94R\x94\x8c\x04deck\x94]\x94(((K\x00K\x07K\x02K\x03t\x94(K\x02K\x03K\x00K\x07t\x94(K\x03K\x00K\x07K\x02t\x94(K\x07K\x02K\x03K\x00t\x94t\x94((K\x00K\x06K\x01K\x04t\x94(K\x01K\x04K\x00K\x06t\x94(K\x04K\x00K\x06K\x01t\x94(K\x06K\x01K\x04K\x00t\x94t\x94((K\x02K\x05K\x03K\x04t\x94(K\x03K\x04K\x02K\x05t\x94(K\x04K\x02K\x05K\x03t\x94(K\x05K\x03K\x04K\x02t\x94t\x94((K\x01K\x06K\x07K\x02t\x94(K\x02K\x01K\x06K\x07t\x94(K\x06K\x07K\x02K\x01t\x94(K\x07K\x02K\x01K\x06t\x94t\x94((K\x03K\x05K\x07K\x04t\x94(K\x04K\x03K\x05K\x07t\x94(K\x05K\x07K\x04K\x03t\x94(K\x07K\x04K\x03K\x05t\x94t\x94((K\x00K\x04K\x06K\x03t\x94(K\x03K\x00K\x04K\x06t\x94(K\x04K\x06K\x03K\x00t\x94(K\x06K\x03K\x00K\x04t\x94t\x94((K\x02K\x07K\x06K\x05t\x94(K\x05K\x02K\x07K\x06t\x94(K\x06K\x05K\x02K\x07t\x94(K\x07K\x06K\x05K\x02t\x94t\x94((K\x01K\x05K\x04K\x07t\x94(K\x04K\x07K\x01K\x05t\x94(K\x05K\x04K\x07K\x01t\x94(K\x07K\x01K\x05K\x04t\x94t\x94((K\x00K\x01K\x06K\x04t\x94(K\x01K\x06K\x04K\x00t\x94(K\x04K\x00K\x01K\x06t\x94(K\x06K\x04K\x00K\x01t\x94t\x94((K\x00K\x01K\x04K\x07t\x94(K\x01K\x04K\x07K\x00t\x94(K\x04K\x07K\x00K\x01t\x94(K\x07K\x00K\x01K\x04t\x94t\x94((K\x01K\x07K\x03K\x05t\x94(K\x03K\x05K\x01K\x07t\x94(K\x05K\x01K\x07K\x03t\x94(K\x07K\x03K\x05K\x01t\x94t\x94((K\x01K\x03K\x06K\x04t\x94(K\x03K\x06K\x04K\x01t\x94(K\x04K\x01K\x03K\x06t\x94(K\x06K\x04K\x01K\x03t\x94t\x94((K\x00K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x00t\x94(K\x04K\x05K\x00K\x02t\x94(K\x05K\x00K\x02K\x04t\x94t\x94((K\x00K\x03K\x07K\x06t\x94(K\x03K\x07K\x06K\x00t\x94(K\x06K\x00K\x03K\x07t\x94(K\x07K\x06K\x00K\x03t\x94t\x94((K\x00K\x03K\x02K\x06t\x94(K\x02K\x06K\x00K\x03t\x94(K\x03K\x02K\x06K\x00t\x94(K\x06K\x00K\x03K\x02t\x94t\x94((K\x00K\x07K\x01K\x02t\x94(K\x01K\x02K\x00K\x07t\x94(K\x02K\x00K\x07K\x01t\x94(K\x07K\x01K\x02K\x00t\x94t\x94((K\x02K\x07K\x05K\x06t\x94(K\x05K\x06K\x02K\x07t\x94(K\x06K\x02K\x07K\x05t\x94(K\x07K\x05K\x06K\x02t\x94t\x94((K\x03K\x04K\x06K\x07t\x94(K\x04K\x06K\x07K\x03t\x94(K\x06K\x07K\x03K\x04t\x94(K\x07K\x03K\x04K\x06t\x94t\x94((K\x01K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x01t\x94(K\x04K\x05K\x01K\x02t\x94(K\x05K\x01K\x02K\x04t\x94t\x94((K\x02K\x03K\x06K\x05t\x94(K\x03K\x06K\x05K\x02t\x94(K\x05K\x02K\x03K\x06t\x94(K\x06K\x05K\x02K\x03t\x94t\x94((K\x01K\x03K\x02K\x06t\x94(K\x02K\x06K\x01K\x03t\x94(K\x03K\x02K\x06K\x01t\x94(K\x06K\x01K\x03K\x02t\x94t\x94((K\x00K\x02K\x01K\x05t\x94(K\x01K\x05K\x00K\x02t\x94(K\x02K\x01K\x05K\x00t\x94(K\x05K\x00K\x02K\x01t\x94t\x94((K\x00K\x05K\x03K\x01t\x94(K\x01K\x00K\x05K\x03t\x94(K\x03K\x01K\x00K\x05t\x94(K\x05K\x03K\x01K\x00t\x94t\x94e\x8c\x0bdrawn_tiles\x94)ub.'

def test_tile_move_quad():
    game: GameState = pickle.loads(BEFORE_QUAD)
    move: Move = pickle.loads(MOVE_QUAD)

    move.attempt(game)

    print(pickle.dumps(game))

    assert game_state_compare(game, pickle.loads(AFTER_QUAD)) == {}

def test_tile_undo_quad():
    game: GameState = pickle.loads(AFTER_QUAD)
    move: Move = pickle.loads(MOVE_QUAD)

    move.attempt_undo(game)

    assert game_state_compare(game, pickle.loads(BEFORE_QUAD)) == {}

BEFORE_QUAD_NO_TOKENS = b'\x80\x04\x95\xc7\x05\x00\x00\x00\x00\x00\x00\x8c\ngame_state\x94\x8c\tGameState\x94\x93\x94)\x81\x94}\x94(\x8c\x05board\x94\x8c\x0bboard_state\x94\x8c\nBoardState\x94\x93\x94)\x81\x94}\x94(\x8c\x05tiles\x94}\x94(K\x00K\x00\x86\x94(K\x03K\x01K\x00K\x06t\x94J\xff\xff\xff\xffK\x00\x86\x94(K\x05K\x06K\x02K\x00t\x94K\x01K\x00\x86\x94(K\x07K\x05K\x04K\x01t\x94K\x00J\xff\xff\xff\xff\x86\x94(K\x00K\x04K\x03K\x07t\x94u\x8c\x10available_spaces\x94\x8f\x94(K\x00K\x01\x86\x94J\xff\xff\xff\xffJ\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffK\x01\x86\x94K\x01K\x01\x86\x94K\x02K\x00\x86\x94K\x01J\xff\xff\xff\xff\x86\x94J\xfe\xff\xff\xffK\x00\x86\x94K\x00J\xfe\xff\xff\xff\x86\x94\x90\x8c\x13pending_token_slots\x94\x8f\x94\x8c\x0btokens_left\x94\x8f\x94(K\x00\x90ub\x8c\x05state\x94h\x00\x8c\x05State\x94\x93\x94K\x00\x85\x94R\x94\x8c\x04deck\x94]\x94(((K\x00K\x07K\x02K\x03t\x94(K\x02K\x03K\x00K\x07t\x94(K\x03K\x00K\x07K\x02t\x94(K\x07K\x02K\x03K\x00t\x94t\x94((K\x00K\x06K\x01K\x04t\x94(K\x01K\x04K\x00K\x06t\x94(K\x04K\x00K\x06K\x01t\x94(K\x06K\x01K\x04K\x00t\x94t\x94((K\x02K\x05K\x03K\x04t\x94(K\x03K\x04K\x02K\x05t\x94(K\x04K\x02K\x05K\x03t\x94(K\x05K\x03K\x04K\x02t\x94t\x94((K\x01K\x06K\x07K\x02t\x94(K\x02K\x01K\x06K\x07t\x94(K\x06K\x07K\x02K\x01t\x94(K\x07K\x02K\x01K\x06t\x94t\x94((K\x03K\x05K\x07K\x04t\x94(K\x04K\x03K\x05K\x07t\x94(K\x05K\x07K\x04K\x03t\x94(K\x07K\x04K\x03K\x05t\x94t\x94((K\x00K\x04K\x06K\x03t\x94(K\x03K\x00K\x04K\x06t\x94(K\x04K\x06K\x03K\x00t\x94(K\x06K\x03K\x00K\x04t\x94t\x94((K\x02K\x07K\x06K\x05t\x94(K\x05K\x02K\x07K\x06t\x94(K\x06K\x05K\x02K\x07t\x94(K\x07K\x06K\x05K\x02t\x94t\x94((K\x01K\x05K\x04K\x07t\x94(K\x04K\x07K\x01K\x05t\x94(K\x05K\x04K\x07K\x01t\x94(K\x07K\x01K\x05K\x04t\x94t\x94((K\x00K\x01K\x06K\x04t\x94(K\x01K\x06K\x04K\x00t\x94(K\x04K\x00K\x01K\x06t\x94(K\x06K\x04K\x00K\x01t\x94t\x94((K\x00K\x01K\x04K\x07t\x94(K\x01K\x04K\x07K\x00t\x94(K\x04K\x07K\x00K\x01t\x94(K\x07K\x00K\x01K\x04t\x94t\x94((K\x01K\x07K\x03K\x05t\x94(K\x03K\x05K\x01K\x07t\x94(K\x05K\x01K\x07K\x03t\x94(K\x07K\x03K\x05K\x01t\x94t\x94((K\x01K\x03K\x06K\x04t\x94(K\x03K\x06K\x04K\x01t\x94(K\x04K\x01K\x03K\x06t\x94(K\x06K\x04K\x01K\x03t\x94t\x94((K\x00K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x00t\x94(K\x04K\x05K\x00K\x02t\x94(K\x05K\x00K\x02K\x04t\x94t\x94((K\x00K\x03K\x07K\x06t\x94(K\x03K\x07K\x06K\x00t\x94(K\x06K\x00K\x03K\x07t\x94(K\x07K\x06K\x00K\x03t\x94t\x94((K\x00K\x03K\x02K\x06t\x94(K\x02K\x06K\x00K\x03t\x94(K\x03K\x02K\x06K\x00t\x94(K\x06K\x00K\x03K\x02t\x94t\x94((K\x00K\x07K\x01K\x02t\x94(K\x01K\x02K\x00K\x07t\x94(K\x02K\x00K\x07K\x01t\x94(K\x07K\x01K\x02K\x00t\x94t\x94((K\x02K\x07K\x05K\x06t\x94(K\x05K\x06K\x02K\x07t\x94(K\x06K\x02K\x07K\x05t\x94(K\x07K\x05K\x06K\x02t\x94t\x94((K\x03K\x04K\x06K\x07t\x94(K\x04K\x06K\x07K\x03t\x94(K\x06K\x07K\x03K\x04t\x94(K\x07K\x03K\x04K\x06t\x94t\x94((K\x01K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x01t\x94(K\x04K\x05K\x01K\x02t\x94(K\x05K\x01K\x02K\x04t\x94t\x94((K\x02K\x03K\x06K\x05t\x94(K\x03K\x06K\x05K\x02t\x94(K\x05K\x02K\x03K\x06t\x94(K\x06K\x05K\x02K\x03t\x94t\x94((K\x01K\x03K\x02K\x06t\x94(K\x02K\x06K\x01K\x03t\x94(K\x03K\x02K\x06K\x01t\x94(K\x06K\x01K\x03K\x02t\x94t\x94((K\x00K\x02K\x01K\x05t\x94(K\x01K\x05K\x00K\x02t\x94(K\x02K\x01K\x05K\x00t\x94(K\x05K\x00K\x02K\x01t\x94t\x94((K\x00K\x05K\x03K\x01t\x94(K\x01K\x00K\x05K\x03t\x94(K\x03K\x01K\x00K\x05t\x94(K\x05K\x03K\x01K\x00t\x94t\x94e\x8c\x0bdrawn_tiles\x94((K\x02K\x05K\x07K\x04t\x94(K\x04K\x02K\x05K\x07t\x94(K\x05K\x07K\x04K\x02t\x94(K\x07K\x04K\x02K\x05t\x94t\x94ub.'
AFTER_QUAD_NO_TOKENS = b'\x80\x04\x95\xb5\x05\x00\x00\x00\x00\x00\x00\x8c\ngame_state\x94\x8c\tGameState\x94\x93\x94)\x81\x94}\x94(\x8c\x05board\x94\x8c\x0bboard_state\x94\x8c\nBoardState\x94\x93\x94)\x81\x94}\x94(\x8c\x05tiles\x94}\x94(K\x00K\x00\x86\x94(K\x03K\x01K\x00K\x06t\x94J\xff\xff\xff\xffK\x00\x86\x94(K\x05K\x06K\x02K\x00t\x94K\x01K\x00\x86\x94(K\x07K\x05K\x04K\x01t\x94K\x00J\xff\xff\xff\xff\x86\x94(K\x00K\x04K\x03K\x07t\x94K\x01J\xff\xff\xff\xff\x86\x94(K\x02K\x05K\x07K\x04t\x94u\x8c\x10available_spaces\x94\x8f\x94(K\x00K\x01\x86\x94K\x02J\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffJ\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffK\x01\x86\x94K\x01K\x01\x86\x94K\x02K\x00\x86\x94K\x01J\xfe\xff\xff\xff\x86\x94J\xfe\xff\xff\xffK\x00\x86\x94K\x00J\xfe\xff\xff\xff\x86\x94\x90\x8c\x13pending_token_slots\x94\x8f\x94\x8c\x0btokens_left\x94\x8f\x94(K\x00\x90ub\x8c\x05state\x94h\x00\x8c\x05State\x94\x93\x94K\x00\x85\x94R\x94\x8c\x04deck\x94]\x94(((K\x00K\x07K\x02K\x03t\x94(K\x02K\x03K\x00K\x07t\x94(K\x03K\x00K\x07K\x02t\x94(K\x07K\x02K\x03K\x00t\x94t\x94((K\x00K\x06K\x01K\x04t\x94(K\x01K\x04K\x00K\x06t\x94(K\x04K\x00K\x06K\x01t\x94(K\x06K\x01K\x04K\x00t\x94t\x94((K\x02K\x05K\x03K\x04t\x94(K\x03K\x04K\x02K\x05t\x94(K\x04K\x02K\x05K\x03t\x94(K\x05K\x03K\x04K\x02t\x94t\x94((K\x01K\x06K\x07K\x02t\x94(K\x02K\x01K\x06K\x07t\x94(K\x06K\x07K\x02K\x01t\x94(K\x07K\x02K\x01K\x06t\x94t\x94((K\x03K\x05K\x07K\x04t\x94(K\x04K\x03K\x05K\x07t\x94(K\x05K\x07K\x04K\x03t\x94(K\x07K\x04K\x03K\x05t\x94t\x94((K\x00K\x04K\x06K\x03t\x94(K\x03K\x00K\x04K\x06t\x94(K\x04K\x06K\x03K\x00t\x94(K\x06K\x03K\x00K\x04t\x94t\x94((K\x02K\x07K\x06K\x05t\x94(K\x05K\x02K\x07K\x06t\x94(K\x06K\x05K\x02K\x07t\x94(K\x07K\x06K\x05K\x02t\x94t\x94((K\x01K\x05K\x04K\x07t\x94(K\x04K\x07K\x01K\x05t\x94(K\x05K\x04K\x07K\x01t\x94(K\x07K\x01K\x05K\x04t\x94t\x94((K\x00K\x01K\x06K\x04t\x94(K\x01K\x06K\x04K\x00t\x94(K\x04K\x00K\x01K\x06t\x94(K\x06K\x04K\x00K\x01t\x94t\x94((K\x00K\x01K\x04K\x07t\x94(K\x01K\x04K\x07K\x00t\x94(K\x04K\x07K\x00K\x01t\x94(K\x07K\x00K\x01K\x04t\x94t\x94((K\x01K\x07K\x03K\x05t\x94(K\x03K\x05K\x01K\x07t\x94(K\x05K\x01K\x07K\x03t\x94(K\x07K\x03K\x05K\x01t\x94t\x94((K\x01K\x03K\x06K\x04t\x94(K\x03K\x06K\x04K\x01t\x94(K\x04K\x01K\x03K\x06t\x94(K\x06K\x04K\x01K\x03t\x94t\x94((K\x00K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x00t\x94(K\x04K\x05K\x00K\x02t\x94(K\x05K\x00K\x02K\x04t\x94t\x94((K\x00K\x03K\x07K\x06t\x94(K\x03K\x07K\x06K\x00t\x94(K\x06K\x00K\x03K\x07t\x94(K\x07K\x06K\x00K\x03t\x94t\x94((K\x00K\x03K\x02K\x06t\x94(K\x02K\x06K\x00K\x03t\x94(K\x03K\x02K\x06K\x00t\x94(K\x06K\x00K\x03K\x02t\x94t\x94((K\x00K\x07K\x01K\x02t\x94(K\x01K\x02K\x00K\x07t\x94(K\x02K\x00K\x07K\x01t\x94(K\x07K\x01K\x02K\x00t\x94t\x94((K\x02K\x07K\x05K\x06t\x94(K\x05K\x06K\x02K\x07t\x94(K\x06K\x02K\x07K\x05t\x94(K\x07K\x05K\x06K\x02t\x94t\x94((K\x03K\x04K\x06K\x07t\x94(K\x04K\x06K\x07K\x03t\x94(K\x06K\x07K\x03K\x04t\x94(K\x07K\x03K\x04K\x06t\x94t\x94((K\x01K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x01t\x94(K\x04K\x05K\x01K\x02t\x94(K\x05K\x01K\x02K\x04t\x94t\x94((K\x02K\x03K\x06K\x05t\x94(K\x03K\x06K\x05K\x02t\x94(K\x05K\x02K\x03K\x06t\x94(K\x06K\x05K\x02K\x03t\x94t\x94((K\x01K\x03K\x02K\x06t\x94(K\x02K\x06K\x01K\x03t\x94(K\x03K\x02K\x06K\x01t\x94(K\x06K\x01K\x03K\x02t\x94t\x94((K\x00K\x02K\x01K\x05t\x94(K\x01K\x05K\x00K\x02t\x94(K\x02K\x01K\x05K\x00t\x94(K\x05K\x00K\x02K\x01t\x94t\x94e\x8c\x0bdrawn_tiles\x94((K\x00K\x05K\x03K\x01t\x94(K\x01K\x00K\x05K\x03t\x94(K\x03K\x01K\x00K\x05t\x94(K\x05K\x03K\x01K\x00t\x94t\x94ub.'

def test_tile_move_quad_no_tokens():
    game: GameState = pickle.loads(BEFORE_QUAD_NO_TOKENS)
    move: Move = pickle.loads(MOVE_QUAD)

    move.attempt(game)

    assert game_state_compare(game, pickle.loads(AFTER_QUAD_NO_TOKENS)) == {}

def test_tile_undo_quad_no_tokens():
    game: GameState = pickle.loads(AFTER_QUAD_NO_TOKENS)
    move: Move = pickle.loads(MOVE_QUAD)

    move.attempt_undo(game)

    assert game_state_compare(game, pickle.loads(BEFORE_QUAD_NO_TOKENS)) == {}

BEFORE_TOKEN = AFTER_QUAD
MOVE_TOKEN = b'\x80\x04\x95=\x00\x00\x00\x00\x00\x00\x00\x8c\x05moves\x94\x8c\tMoveToken\x94\x93\x94)\x81\x94}\x94(\x8c\x08position\x94K\x00J\xff\xff\xff\xff\x86\x94\x8c\x05token\x94K\x04ub.'
AFTER_TOKEN = b'\x80\x04\x95\xc1\x05\x00\x00\x00\x00\x00\x00\x8c\ngame_state\x94\x8c\tGameState\x94\x93\x94)\x81\x94}\x94(\x8c\x05board\x94\x8c\x0bboard_state\x94\x8c\nBoardState\x94\x93\x94)\x81\x94}\x94(\x8c\x05tiles\x94}\x94(K\x00K\x00\x86\x94(K\x03K\x01K\x00K\x06t\x94J\xff\xff\xff\xffK\x00\x86\x94(K\x05K\x06K\x02K\x00t\x94K\x01K\x00\x86\x94(K\x07K\x05K\x04K\x01t\x94K\x00J\xff\xff\xff\xff\x86\x94(K\x00K\x04K\x03K\x07t\x94K\x01J\xff\xff\xff\xff\x86\x94(K\x02K\x05K\x07K\x04t\x94u\x8c\x10available_spaces\x94\x8f\x94(K\x00K\x01\x86\x94K\x02J\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffJ\xff\xff\xff\xff\x86\x94J\xff\xff\xff\xffK\x01\x86\x94K\x01K\x01\x86\x94K\x02K\x00\x86\x94K\x01J\xfe\xff\xff\xff\x86\x94J\xfe\xff\xff\xffK\x00\x86\x94K\x00J\xfe\xff\xff\xff\x86\x94\x90\x8c\x13pending_token_slots\x94\x8f\x94\x8c\x0btokens_left\x94\x8f\x94(K\x00K\x01K\x02K\x03K\x05K\x06K\x07\x90ub\x8c\x05state\x94h\x00\x8c\x05State\x94\x93\x94K\x00\x85\x94R\x94\x8c\x04deck\x94]\x94(((K\x00K\x07K\x02K\x03t\x94(K\x02K\x03K\x00K\x07t\x94(K\x03K\x00K\x07K\x02t\x94(K\x07K\x02K\x03K\x00t\x94t\x94((K\x00K\x06K\x01K\x04t\x94(K\x01K\x04K\x00K\x06t\x94(K\x04K\x00K\x06K\x01t\x94(K\x06K\x01K\x04K\x00t\x94t\x94((K\x02K\x05K\x03K\x04t\x94(K\x03K\x04K\x02K\x05t\x94(K\x04K\x02K\x05K\x03t\x94(K\x05K\x03K\x04K\x02t\x94t\x94((K\x01K\x06K\x07K\x02t\x94(K\x02K\x01K\x06K\x07t\x94(K\x06K\x07K\x02K\x01t\x94(K\x07K\x02K\x01K\x06t\x94t\x94((K\x03K\x05K\x07K\x04t\x94(K\x04K\x03K\x05K\x07t\x94(K\x05K\x07K\x04K\x03t\x94(K\x07K\x04K\x03K\x05t\x94t\x94((K\x00K\x04K\x06K\x03t\x94(K\x03K\x00K\x04K\x06t\x94(K\x04K\x06K\x03K\x00t\x94(K\x06K\x03K\x00K\x04t\x94t\x94((K\x02K\x07K\x06K\x05t\x94(K\x05K\x02K\x07K\x06t\x94(K\x06K\x05K\x02K\x07t\x94(K\x07K\x06K\x05K\x02t\x94t\x94((K\x01K\x05K\x04K\x07t\x94(K\x04K\x07K\x01K\x05t\x94(K\x05K\x04K\x07K\x01t\x94(K\x07K\x01K\x05K\x04t\x94t\x94((K\x00K\x01K\x06K\x04t\x94(K\x01K\x06K\x04K\x00t\x94(K\x04K\x00K\x01K\x06t\x94(K\x06K\x04K\x00K\x01t\x94t\x94((K\x00K\x01K\x04K\x07t\x94(K\x01K\x04K\x07K\x00t\x94(K\x04K\x07K\x00K\x01t\x94(K\x07K\x00K\x01K\x04t\x94t\x94((K\x01K\x07K\x03K\x05t\x94(K\x03K\x05K\x01K\x07t\x94(K\x05K\x01K\x07K\x03t\x94(K\x07K\x03K\x05K\x01t\x94t\x94((K\x01K\x03K\x06K\x04t\x94(K\x03K\x06K\x04K\x01t\x94(K\x04K\x01K\x03K\x06t\x94(K\x06K\x04K\x01K\x03t\x94t\x94((K\x00K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x00t\x94(K\x04K\x05K\x00K\x02t\x94(K\x05K\x00K\x02K\x04t\x94t\x94((K\x00K\x03K\x07K\x06t\x94(K\x03K\x07K\x06K\x00t\x94(K\x06K\x00K\x03K\x07t\x94(K\x07K\x06K\x00K\x03t\x94t\x94((K\x00K\x03K\x02K\x06t\x94(K\x02K\x06K\x00K\x03t\x94(K\x03K\x02K\x06K\x00t\x94(K\x06K\x00K\x03K\x02t\x94t\x94((K\x00K\x07K\x01K\x02t\x94(K\x01K\x02K\x00K\x07t\x94(K\x02K\x00K\x07K\x01t\x94(K\x07K\x01K\x02K\x00t\x94t\x94((K\x02K\x07K\x05K\x06t\x94(K\x05K\x06K\x02K\x07t\x94(K\x06K\x02K\x07K\x05t\x94(K\x07K\x05K\x06K\x02t\x94t\x94((K\x03K\x04K\x06K\x07t\x94(K\x04K\x06K\x07K\x03t\x94(K\x06K\x07K\x03K\x04t\x94(K\x07K\x03K\x04K\x06t\x94t\x94((K\x01K\x02K\x04K\x05t\x94(K\x02K\x04K\x05K\x01t\x94(K\x04K\x05K\x01K\x02t\x94(K\x05K\x01K\x02K\x04t\x94t\x94((K\x02K\x03K\x06K\x05t\x94(K\x03K\x06K\x05K\x02t\x94(K\x05K\x02K\x03K\x06t\x94(K\x06K\x05K\x02K\x03t\x94t\x94((K\x01K\x03K\x02K\x06t\x94(K\x02K\x06K\x01K\x03t\x94(K\x03K\x02K\x06K\x01t\x94(K\x06K\x01K\x03K\x02t\x94t\x94((K\x00K\x02K\x01K\x05t\x94(K\x01K\x05K\x00K\x02t\x94(K\x02K\x01K\x05K\x00t\x94(K\x05K\x00K\x02K\x01t\x94t\x94e\x8c\x0bdrawn_tiles\x94((K\x00K\x05K\x03K\x01t\x94(K\x01K\x00K\x05K\x03t\x94(K\x03K\x01K\x00K\x05t\x94(K\x05K\x03K\x01K\x00t\x94t\x94ub.'

def test_token_move():
    game: GameState = pickle.loads(BEFORE_TOKEN)
    move: Move = pickle.loads(MOVE_TOKEN)

    move.attempt(game)

    assert game_state_compare(game, pickle.loads(AFTER_TOKEN)) == {}

def test_token_undo():
    game: GameState = pickle.loads(AFTER_TOKEN)
    move: Move = pickle.loads(MOVE_TOKEN)

    move.attempt_undo(game)

    assert game_state_compare(game, pickle.loads(BEFORE_TOKEN)) == {}

def test_token_move_more():
    pass

def test_token_undo_more():
    pass